# ๐ ุงูููุชุจุฉ ุงูุฅุณูุงููุฉ - ุฏูุงุฆู AI

ูุงุฌูุฉ ุจุฑูุฌูุฉ ุดุงููุฉ ููุชุนุงูู ูุน ุงูููุชุจุฉ ุงูุดุงููุฉ (shamela.ws)

## ๐ ุงููุชุทูุจุงุช

- Node.js v18+
- npm ุฃู yarn

## ๐ ุงูุชุซุจูุช ูุงูุชุดุบูู

```bash
# 1. ุชุซุจูุช ุงููุชุทูุจุงุช
npm install

# 2. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู API ุงูุดุงููุฉ
npm test

# 3. ุชุดุบูู ุงูุฎุงุฏู
npm start
```

## ๐ก API Endpoints

### ุงูุฃุณุงุณูุฉ

| ุงููุณุงุฑ | ุงููุตู |
|--------|-------|
| `GET /api/categories` | ูุงุฆูุฉ ุงูุฃูุณุงู |
| `GET /api/authors` | ูุงุฆูุฉ ุงููุคูููู |
| `GET /api/books` | ูุงุฆูุฉ ุงููุชุจ |
| `GET /api/books/:id` | ุชูุงุตูู ูุชุงุจ |
| `GET /api/books/:id/content` | ูุญุชูู ูุชุงุจ |
| `GET /api/search?q=...` | ุงูุจุญุซ |
| `GET /api/stats` | ุงูุฅุญุตุงุฆูุงุช |

### ุงููุฒุงููุฉ

| ุงููุณุงุฑ | ุงููุตู |
|--------|-------|
| `POST /api/sync/master` | ูุฒุงููุฉ ุงูุฃูุณุงู ูุงููุชุจ ูุงููุคูููู |
| `POST /api/sync/book/:id` | ุชุญููู/ุชุญุฏูุซ ูุชุงุจ ูุนูู |

## ๐ง ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### 1. ูุฒุงููุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ (ุฃูู ูุฑุฉ)

```bash
curl -X POST http://localhost:3001/api/sync/master
```

**ุงูุฑุฏ:**
```json
{
  "success": true,
  "message": "ุชู ุงูุชุญุฏูุซ",
  "version": 5,
  "stats": {
    "categories": 35,
    "books": 8552,
    "authors": 2145
  }
}
```

### 2. ุงูุจุญุซ ูู ุงููุชุจ

```bash
curl "http://localhost:3001/api/search?q=ุตุญูุญ ุงูุจุฎุงุฑู"
```

**ุงูุฑุฏ:**
```json
{
  "success": true,
  "query": "ุตุญูุญ ุงูุจุฎุงุฑู",
  "results": {
    "books": [
      {
        "id": 1681,
        "name": "ุตุญูุญ ุงูุจุฎุงุฑู",
        "author": "ุงูุจุฎุงุฑู",
        "type": "book"
      }
    ]
  }
}
```

### 3. ุฌูุจ ูุงุฆูุฉ ุงููุชุจ ูุน ููุชุฑุฉ

```bash
# ูู ุงููุชุจ
curl "http://localhost:3001/api/books"

# ูุชุจ ูุณู ูุนูู
curl "http://localhost:3001/api/books?category=5"

# ูุชุจ ูุคูู ูุนูู
curl "http://localhost:3001/api/books?author=123"

# ุงูุจุญุซ ูู ุงูุนูุงููู
curl "http://localhost:3001/api/books?search=ุชูุณูุฑ"
```

### 4. ุชุญููู ูุชุงุจ

```bash
curl -X POST http://localhost:3001/api/sync/book/1681
```

**ุงูุฑุฏ:**
```json
{
  "success": true,
  "message": "ุชู ุงูุชุญุฏูุซ",
  "major": 2,
  "minor": 1,
  "pageCount": 4500,
  "titleCount": 350
}
```

### 5. ูุฑุงุกุฉ ูุญุชูู ูุชุงุจ

```bash
curl "http://localhost:3001/api/books/1681/content"
```

**ุงูุฑุฏ:**
```json
{
  "success": true,
  "data": {
    "pages": [
      {
        "id": 1,
        "part": "1",
        "page": 1,
        "content": "ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู..."
      }
    ],
    "titles": [
      {
        "id": 1,
        "content": "ูุชุงุจ ุจุฏุก ุงููุญู",
        "pageId": 5,
        "children": [
          {
            "id": 2,
            "content": "ุจุงุจ ููู ูุงู ุจุฏุก ุงููุญู",
            "pageId": 6,
            "children": []
          }
        ]
      }
    ],
    "totalPages": 4500,
    "totalTitles": 350
  }
}
```

## ๐ ูููู ุงููููุงุช

```
shamela_test/
โโโ package.json          # ุงููุชุทูุจุงุช
โโโ test_shamela.js       # ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ
โโโ server.js             # ุฎุงุฏู API
โโโ README.md             # ุงูุชูุซูู
โโโ shamela_data/         # ุงูุจูุงูุงุช ุงููุญููุธุฉ
โ   โโโ master.json       # ุงูุฃูุณุงู ูุงููุชุจ ูุงููุคูููู
โ   โโโ books/            # ูุญุชูู ุงููุชุจ
โ       โโโ 1681.json     # ุตุญูุญ ุงูุจุฎุงุฑู
โ       โโโ ...
โโโ shamela_cache/        # ุงูุฅุตุฏุงุฑุงุช ูุงููููุงุช ุงููุคูุชุฉ
    โโโ master_version.json
    โโโ book_1681_version.json
```

## ๐ ุขููุฉ ุงูุนูู

### 1. ุฌูุจ Master (ุฃูู ูุฑุฉ)

```
โโโโโโโโโโโโโโโโ     GET /patches/master?version=0     โโโโโโโโโโโโโโโโ
โ   ุงูุนููู     โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโถ โ  ุงูุดุงููุฉ API โ
โ              โ                                        โ              โ
โ              โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ              โ
โโโโโโโโโโโโโโโโ     { patch_url, Version: 5 }         โโโโโโโโโโโโโโโโ
        โ
        โ ุชุญููู ZIP
        โผ
โโโโโโโโโโโโโโโโ
โ   ZIP File   โ
โ โโโโโโโโโโโโ โ
โ โbook.db   โ โ โโโ SQLite โโโโถ 8500 ูุชุงุจ
โ โauthor.db โ โ โโโ SQLite โโโโถ 2100 ูุคูู
โ โcategory.dbโ โ โโโ SQLite โโโโถ 35 ูุณู
โ โโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโ
```

### 2. ุฌูุจ ูุชุงุจ

```
โโโโโโโโโโโโโโโโ  GET /patches/book-updates/1681?major=0&minor=0  โโโโโโโโโโโโโโโโ
โ   ุงูุนููู     โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโถ โ  ุงูุดุงููุฉ API โ
โ              โ                                                   โ              โ
โ              โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ              โ
โโโโโโโโโโโโโโโโ  { major_release_url, minor_release_url, ... }    โโโโโโโโโโโโโโโโ
        โ
        โ ุชุญููู Major ZIP
        โผ
โโโโโโโโโโโโโโโโ
โ   ZIP File   โ
โ โโโโโโโโโโโโ โ
โ โ page.db  โ โ โโโ SQLite โโโโถ ุตูุญุงุช ุงููุชุงุจ
โ โ title.db โ โ โโโ SQLite โโโโถ ููุฑุณ ุงููุชุงุจ
โ โโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโ
```

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูู API ููุณ ููุจุญุซ ุงููุจุงุดุฑ**: ููุฑุฌุน ูููุงุช SQLite ูุถุบูุทุฉ ูููุณ JSON
2. **ูุฌุจ ูุฒุงููุฉ Master ุฃููุงู**: ูุจู ุงุณุชุฎุฏุงู ุฃู ูุธููุฉ
3. **ุงููุชุจ ุชูุญููู ุญุณุจ ุงูุทูุจ**: ูุชูููุฑ ุงููุณุงุญุฉ
4. **ูุธุงู ุงูุฅุตุฏุงุฑุงุช**: ูุชุชุจุน ุงูุชุญุฏูุซุงุช ูุชุฌูุจ ุฅุนุงุฏุฉ ุงูุชุญููู

## ๐ ุฑูุงุจุท ูููุฏุฉ

- [ุงูููุชุจุฉ ุงูุดุงููุฉ](https://shamela.ws)
- [ุชุทุจูู ุชุฑุงุซ](https://app.turath.io)
- [ุชูุซูู API ุงูุดุงููุฉ](https://dev.shamela.ws)

## ๐ ุงูุชุฑุฎูุต

MIT - ููุงุณุชุฎุฏุงู ูู ูุดุฑูุน ุฏูุงุฆู AI
